{% extends "admin/base.html" %}
{% block title %}{{ 'Editar' if produto else 'Novo' }} Produto{% endblock %}
{% block page_title %}{{ 'Editar' if produto else 'Novo' }} Produto{% endblock %}

{% block content %}
<div class="card" style="max-width:820px;">
  <form action="{{ form_action }}" method="post" enctype="multipart/form-data">
    <div style="display:flex; gap:12px;">
      <div style="flex:1;">
        <label>Nome</label>
        <input type="text" name="nome" value="{{ produto.nome if produto else '' }}" class="form-control" required>
      </div>
      <div style="width:160px;">
        <label>Preço</label>
        <input type="number" step="0.01" name="preco" value="{{ produto.preco if produto else '' }}" class="form-control" required>
      </div>
    </div>

    <div style="margin-top:10px;">
      <label>Categoria</label>
      <select name="categoria_id" class="form-control">
        <option value="">-- Selecionar --</option>
        {% for c in categorias %}
        <option value="{{ c.id }}" {% if produto and produto.categoria_id==c.id %}selected{% endif %}>{{ c.nome }}</option>
        {% endfor %}
      </select>
    </div>

    <div style="margin-top:10px;">
      <label>Descrição</label>
      <textarea name="descricao" class="form-control">{{ produto.descricao if produto else '' }}</textarea>
    </div>

    <div style="margin-top:10px;">
      <label>Imagem (path ou upload)</label>
      <input type="text" name="imagem" value="{{ produto.imagem if produto else '' }}" class="form-control">
      <small class="muted">Ou faça upload:</small>
      <input type="file" name="imagem_file" class="form-control">
    </div>

    <div style="margin-top:10px;">
      <label><input type="checkbox" name="ativo" {% if produto and produto.ativo %}checked{% endif %}> Ativo</label>
    </div>

    <div style="margin-top:12px;">
      <button class="btn btn-primary" type="submit">Salvar</button>
      <a class="btn btn-outline" href="{{ url_for('admin.admin_produtos') }}">Cancelar</a>
    </div>
  </form>
</div>
{% endblock %}
